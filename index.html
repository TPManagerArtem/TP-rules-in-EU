<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –¥–∞—à–±–æ—Ä–¥ –∑ –≤–∏–º–æ–≥ –¢–¶ –≤ –Ñ–≤—Ä–æ–ø—ñ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutral Harmony -->
    <!-- Application Structure Plan: The SPA uses a dashboard design with interactive country cards. This structure was chosen over a linear report format to facilitate quick, non-linear exploration and comparison of complex tax requirements across different jurisdictions. The primary user flow involves selecting a country to see all its requirements or using the chart's filter to compare a specific metric (like penalties) across all countries. This is more efficient for a tax professional needing targeted information. -->
    <!-- Visualization & Content Choices: Data is organized by country and then by requirement type within expandable accordions (Goal: Organize/Inform, Method: HTML/JS/Tailwind). This prevents information overload. A key interactive element is a dynamic bar chart (Goal: Compare, Library: Chart.js/Canvas) that allows users to visually compare penalty amounts across countries. This choice provides immediate high-level insight into compliance risk. All detailed text is structured with headings and lists for readability. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #374151;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .accordion-button.open + .accordion-content {
            max-height: 1000px; /* Adjust as needed */
            transition: max-height 0.5s ease-in;
        }
        .accordion-button .arrow {
            transition: transform 0.3s ease-out;
        }
        .accordion-button.open .arrow {
            transform: rotate(180deg);
        }
        .filter-btn.active {
            background-color: #0d9488; /* teal-600 */
            color: white;
            border-color: #0d9488;
        }
        .comparison-checkbox:checked + label {
           border-color: #0d9488;
           background-color: #f0fdfa;
           color: #134e4a;
        }
        #comparison-mode-toggle:checked + label .toggle-bg {
            background-color: #0d9488;
        }
        #comparison-mode-toggle:checked + label .toggle-dot {
            transform: translateX(1.25rem);
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto px-4 py-8 md:px-8 md:py-12">

        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">–û–≥–ª—è–¥ –≤–∏–º–æ–≥ –∑ –¢—Ä–∞–Ω—Å—Ñ–µ—Ä—Ç–Ω–æ–≥–æ –¶—ñ–Ω–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤ –Ñ–≤—Ä–æ–ø—ñ</h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É —Ç–∞ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–æ–±–æ–≤'—è–∑–∞–Ω—å.</p>
        </header>

        <main>
            <section id="filters" class="mb-10 p-6 bg-white rounded-2xl shadow-sm border border-gray-200">
                <div class="flex justify-end mb-6">
                    <div class="flex items-center">
                        <label for="comparison-mode-toggle" class="mr-3 text-sm font-medium text-gray-900">–†–µ–∂–∏–º –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è</label>
                        <input type="checkbox" id="comparison-mode-toggle" class="hidden">
                        <label for="comparison-mode-toggle" class="relative inline-flex items-center h-6 rounded-full w-11 cursor-pointer">
                            <span class="toggle-bg absolute inline-block w-full h-full bg-gray-200 rounded-full transition-colors"></span>
                            <span class="toggle-dot absolute inline-block w-4 h-4 transform bg-white rounded-full transition-transform translate-x-1"></span>
                        </label>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                    <!-- Column 1: Mode-dependent filters -->
                    <div>
                        <div id="standard-filters">
                             <label for="country-filter" class="block text-sm font-medium text-gray-700 mb-2">–í–∏–±–µ—Ä—ñ—Ç—å –∫—Ä–∞—ó–Ω—É –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É</label>
                             <select id="country-filter" class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                 <option value="all">–í—Å—ñ –∫—Ä–∞—ó–Ω–∏</option>
                             </select>
                        </div>

                        <div id="comparison-filters" class="hidden space-y-6">
                             <div>
                                 <label for="base-country-filter" class="block text-sm font-medium text-gray-700 mb-2">1. –û—Å–Ω–æ–≤–Ω–∞ –∫—Ä–∞—ó–Ω–∞</label>
                                 <select id="base-country-filter" class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                 </select>
                             </div>
                              <div>
                                 <label class="block text-sm font-medium text-gray-700 mb-2">2. –ö—Ä–∞—ó–Ω–∏ –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è</label>
                                 <div id="comparison-country-filter" class="grid grid-cols-2 sm:grid-cols-3 gap-3 max-h-40 overflow-y-auto pr-2">
                                 </div>
                             </div>
                        </div>
                    </div>

                    <!-- Column 2: Always visible report type filters -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">–í–∏–±–µ—Ä—ñ—Ç—å —Ç–∏–ø –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ</label>
                         <div id="report-type-filter" class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                         </div>
                    </div>
                </div>
            </section>
            
            <section id="country-details-view">
                <h2 id="details-title" class="text-2xl font-bold text-gray-800 mb-6 text-center">–î–µ—Ç–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥ –ø–æ –∫—Ä–∞—ó–Ω–∞—Ö</h2>
                <div id="countries-container" class="space-y-6">
                </div>
            </section>
            
            <section id="comparison-table-view" class="hidden">
                 <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">–ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è</h2>
                 <div id="comparison-container" class="w-full overflow-x-auto bg-white p-4 rounded-2xl shadow-sm border border-gray-200">
                 </div>
            </section>
        </main>

        <footer class="text-center mt-12 pt-8 border-t border-gray-200">
            <p class="text-gray-500">–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–∞–ª—ñ–∑—É –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –¥–∂–µ—Ä–µ–ª —Å—Ç–∞–Ω–æ–º –Ω–∞ —á–µ—Ä–≤–µ–Ω—å 2025 —Ä–æ–∫—É. –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –Ω–∞–¥–∞—î—Ç—å—Å—è –¥–ª—è –æ–∑–Ω–∞–π–æ–º—á–∏—Ö —Ü—ñ–ª–µ–π —ñ –Ω–µ —î —é—Ä–∏–¥–∏—á–Ω–æ—é —á–∏ –ø–æ–¥–∞—Ç–∫–æ–≤–æ—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—î—é.</p>
        </footer>
    </div>

<script>
const tpData = {
    germany: {
        name: "–ù—ñ–º–µ—á—á–∏–Ω–∞",
        currency: "EUR",
        requirements: {
            cbcr: {
                title: "–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è CbCR",
                who: "–ö–æ–∂–Ω–∞ –Ω—ñ–º–µ—Ü—å–∫–∞ –∫–æ–º–ø–∞–Ω—ñ—è –ú–ù–ö (> ‚Ç¨750 –º–ª–Ω). –ü–æ–≤—ñ–¥–æ–º–ª—è—î BZSt –ø—Ä–æ —Å—Ç–∞—Ç—É—Å —Ç–∞ –∑–≤—ñ—Ç—É—é—á—É –æ—Å–æ–±—É.",
                deadline: "–î–æ –∫—ñ–Ω—Ü—è —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —Ä–æ–∫—É –ú–ù–ö.",
                penalty: "–î–æ ‚Ç¨10,000. –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –¥–æ ‚Ç¨5,000 –∑–∞ –Ω–µ–ø—Ä–∞–≤–¥–∏–≤—ñ –¥–∞–Ω—ñ.",
                law: "¬ß 138a Abgabenordnung (AO)"
            },
            tpForm: {
                title: "–°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Ñ–æ—Ä–º–∏ –∑ –¢–¶",
                who: "–ù—ñ–º–µ—Ü—å–∫—ñ –ø–ª–∞—Ç–Ω–∏–∫–∏ –ø–æ–¥–∞—Ç–∫—ñ–≤ –∑ —Ç—Ä–∞–Ω—Å–∫–æ—Ä–¥–æ–Ω–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏. –í–∏–º–æ–≥–∞ –∑ 01.01.2025.",
                deadline: "30 –¥–Ω—ñ–≤ –ø—ñ—Å–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É.",
                penalty: "–ù–µ–ø–æ–¥–∞–Ω–Ω—è: –º—ñ–Ω. ‚Ç¨5,000. –ù–µ—Å–≤–æ—î—á–∞—Å–Ω–µ: –º—ñ–Ω. ‚Ç¨100/–¥–µ–Ω—å, –¥–æ ‚Ç¨1,000,000.",
                law: "¬ß 90(3), ¬ß 162(4) AO"
            },
            localFile: {
                title: "Local File",
                who: "–ù—ñ–º–µ—Ü—å–∫—ñ –∫–æ–º–ø–∞–Ω—ñ—ó –∑ —Ç—Ä–∞–Ω—Å–∫–æ—Ä–¥–æ–Ω–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏.",
                deadline: "30 –¥–Ω—ñ–≤ –ø—ñ—Å–ª—è –∑–∞–ø–∏—Ç—É –∞—É–¥–∏—Ç–æ—Ä–∞.",
                penalty: "5-10% –≤—ñ–¥ —Å—É–º–∏ –∫–æ—Ä–µ–∫—Ü—ñ—ó (–º—ñ–Ω. ‚Ç¨5,000). –ù–µ—Å–≤–æ—î—á–∞—Å–Ω–µ: –º—ñ–Ω. ‚Ç¨100/–¥–µ–Ω—å, –¥–æ ‚Ç¨1,000,000.",
                law: "¬ß 90(3), ¬ß 162(3,4) AO"
            },
            pillar2: {
                title: "–ó–≤—ñ—Ç–Ω—ñ—Å—Ç—å Pillar 2 (GIR)",
                who: "–ù—ñ–º–µ—Ü—å–∫—ñ –∫–æ–º–ø–∞–Ω—ñ—ó –ú–ù–ö (>‚Ç¨750 –º–ª–Ω).",
                deadline: "15 –º—ñ—Å. (18 –º—ñ—Å. –¥–ª—è 1-–≥–æ —Ä–æ–∫—É) –ø—ñ—Å–ª—è –∫—ñ–Ω—Ü—è —Ñ—ñ–Ω. —Ä–æ–∫—É.",
                penalty: "–î–æ ‚Ç¨30,000 –∑–∞ –Ω–µ—Å–≤–æ—î—á–∞—Å–Ω–µ –ø–æ–¥–∞–Ω–Ω—è GIR.",
                law: "MinBestG"
            },
            cit: {
                title: "–î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è CIT",
                who: "–í—Å—ñ —é—Ä–∏–¥–∏—á–Ω—ñ –æ—Å–æ–±–∏-–ø–ª–∞—Ç–Ω–∏–∫–∏ –ø–æ–¥–∞—Ç–∫—É.",
                deadline: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ: 31 –ª–∏–ø–Ω—è. –ó –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–æ–º: –ø–æ–¥–æ–≤–∂–µ–Ω—ñ —Ç–µ—Ä–º—ñ–Ω–∏.",
                penalty: "–®—Ç—Ä–∞—Ñ–∏ –∑–∞ –¢–¶, –¥–æ–Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è, –≤—ñ–¥—Å–æ—Ç–∫–∏.",
                law: "KStG, AO"
            }
        }
    },
    france: {
        name: "–§—Ä–∞–Ω—Ü—ñ—è",
        currency: "EUR",
        requirements: {
            cbcr: {
                title: "–ó–≤—ñ—Ç CbCR (2258-SD)",
                who: "–§—Ä–∞–Ω—Ü—É–∑—å–∫—ñ –∫–æ–º–ø–∞–Ω—ñ—ó –ú–ù–ö (>‚Ç¨750 –º–ª–Ω). –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–µ.",
                deadline: "12 –º—ñ—Å—è—Ü—ñ–≤ –ø—ñ—Å–ª—è –∫—ñ–Ω—Ü—è —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —Ä–æ–∫—É.",
                penalty: "–î–æ ‚Ç¨100,000.",
                law: "–°—Ç. 223 quinquies C CGI"
            },
            tpForm: {
                title: "–§–æ—Ä–º–∞ 2257-SD",
                who: "–ö–æ–º–ø–∞–Ω—ñ—ó –∑ –æ–±–æ—Ä–æ—Ç–æ–º/–∞–∫—Ç–∏–≤–∞–º–∏ ‚â• ‚Ç¨50 –º–ª–Ω, –∞–±–æ –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –Ω–∏–º–∏.",
                deadline: "6 –º—ñ—Å—è—Ü—ñ–≤ –ø—ñ—Å–ª—è —Ç–µ—Ä–º—ñ–Ω—É –ø–æ–¥–∞–Ω–Ω—è 'liasse fiscale'.",
                penalty: "–ù–µ–ø–æ–¥–∞–Ω–Ω—è: ‚Ç¨150. –ù–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ: ‚Ç¨15/–ø–æ–º–∏–ª–∫—É (–º–∞–∫—Å. ‚Ç¨10,000).",
                law: "–°—Ç. 223 quinquies B CGI"
            },
            localFile: {
                title: "Local File",
                who: "–ö–æ–º–ø–∞–Ω—ñ—ó –∑ –æ–±–æ—Ä–æ—Ç–æ–º/–∞–∫—Ç–∏–≤–∞–º–∏ ‚â• ‚Ç¨400 –º–ª–Ω, –∞–±–æ –ø–æ–≤'—è–∑–∞–Ω—ñ.",
                deadline: "–ù–∞ –∑–∞–ø–∏—Ç –ø—ñ–¥ —á–∞—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (30 –¥–Ω—ñ–≤).",
                penalty: "0.5% –≤—ñ–¥ —Å—É–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ–π –∞–±–æ 5% –≤—ñ–¥ –¥–æ–Ω–∞—Ä–∞—Ö—É–≤–∞–Ω—å (–≤–∏—â–∞ —Å—É–º–∞), –º—ñ–Ω. ‚Ç¨10,000/—Ä—ñ–∫.",
                law: "L. 13 AA LPF; —Å—Ç. 1735 ter CGI"
            },
            pillar2: {
                title: "–ó–≤—ñ—Ç–Ω—ñ—Å—Ç—å Pillar 2 (GIR)",
                who: "–§—Ä–∞–Ω—Ü—É–∑—å–∫—ñ –∫–æ–º–ø–∞–Ω—ñ—ó –ú–ù–ö/–≤–µ–ª–∏–∫–∏—Ö –≥—Ä—É–ø (>‚Ç¨750 –º–ª–Ω).",
                deadline: "–¢–µ—Ä–º—ñ–Ω –ø–æ–¥–∞–Ω–Ω—è GIR –±—É–¥–µ —É—Ç–æ—á–Ω–µ–Ω–æ.",
                penalty: "–ë—É–¥–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ.",
                law: "–ó–∞–∫–æ–Ω –ø—Ä–æ —Ñ—ñ–Ω–∞–Ω—Å–∏ 2024"
            },
            cit: {
                title: "–î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è CIT",
                who: "–í—Å—ñ —é—Ä–∏–¥–∏—á–Ω—ñ –æ—Å–æ–±–∏-–ø–ª–∞—Ç–Ω–∏–∫–∏ –ø–æ–¥–∞—Ç–∫—É.",
                deadline: "3 –º—ñ—Å—è—Ü—ñ –ø—ñ—Å–ª—è –∫—ñ–Ω—Ü—è —Ñ—ñ–Ω. —Ä–æ–∫—É (–∞–±–æ 2-–π –¥–µ–Ω—å –ø—ñ—Å–ª—è 1 —Ç—Ä–∞–≤–Ω—è).",
                penalty: "–î–æ–Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è, —à—Ç—Ä–∞—Ñ–∏ 40%-80%, –≤—ñ–¥—Å–æ—Ç–∫–∏.",
                law: "–°—Ç. 57 CGI"
            }
        }
    },
    uk: {
        name: "–í–µ–ª–∏–∫–∞ –ë—Ä–∏—Ç–∞–Ω—ñ—è",
        currency: "GBP",
        requirements: {
            cbcr: {
                title: "–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è CbCR",
                who: "–ë—Ä–∏—Ç–∞–Ω—Å—å–∫—ñ –∫–æ–º–ø–∞–Ω—ñ—ó –ú–ù–ö (>‚Ç¨750 –º–ª–Ω).",
                deadline: "–í–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è Regulations 2016.",
                penalty: "¬£300 + ¬£60/–¥–µ–Ω—å. –ù–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ: –¥–æ ¬£3,000.",
                law: "The CbCR Regulations 2016"
            },
            tpForm: {
                title: "–§–æ—Ä–º–∞ ICTS (–ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—è)",
                who: "–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –∫–æ–º–ø–∞–Ω—ñ—ó –∑ —Å—É—Ç—Ç—î–≤–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏.",
                deadline: "–ù–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ.",
                penalty: "–ù–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ.",
                law: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ–π–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç"
            },
            localFile: {
                title: "Local File / Master File",
                who: "–û–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è –≥—Ä—É–ø >‚Ç¨750 –º–ª–Ω –∑ 01.04.2023.",
                deadline: "30 –¥–Ω—ñ–≤ –ø—ñ—Å–ª—è –∑–∞–ø–∏—Ç—É HMRC.",
                penalty: "¬£3,000 —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π. –ü–æ–¥–∞—Ç–∫–æ–≤–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–∏–π –¥–æ 100% PLR.",
                law: "The TP Records Regulations 2023"
            },
            pillar2: {
                title: "–ó–≤—ñ—Ç–Ω—ñ—Å—Ç—å Pillar 2 (GIR/ORN)",
                who: "–ë—Ä–∏—Ç–∞–Ω—Å—å–∫—ñ –∫–æ–º–ø–∞–Ω—ñ—ó –ú–ù–ö (>‚Ç¨750 –º–ª–Ω).",
                deadline: "–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è: 6 –º—ñ—Å. GIR: 15-18 –º—ñ—Å. –ø—ñ—Å–ª—è –∫—ñ–Ω—Ü—è –ø–µ—Ä—ñ–æ–¥—É.",
                penalty: "–ó–Ω–∞—á–Ω—ñ —à—Ç—Ä–∞—Ñ–∏ (–¥–µ—Ç–∞–ª—ñ –Ω–µ –Ω–∞–¥–∞–Ω—ñ).",
                law: "Finance (No. 2) Act 2023"
            },
            cit: {
                title: "–î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è CT600",
                who: "–í—Å—ñ —é—Ä. –æ—Å–æ–±–∏-–ø–ª–∞—Ç–Ω–∏–∫–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–¥–∞—Ç–∫—É.",
                deadline: "12 –º—ñ—Å—è—Ü—ñ–≤ –ø—ñ—Å–ª—è –∫—ñ–Ω—Ü—è –ø–µ—Ä—ñ–æ–¥—É.",
                penalty: "–®—Ç—Ä–∞—Ñ–∏ –∑–∞ –¢–¶, –¥–æ–Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è, –≤—ñ–¥—Å–æ—Ç–∫–∏.",
                law: "TIOPA 2010"
            }
        }
    },
    netherlands: {
        name: "–ù—ñ–¥–µ—Ä–ª–∞–Ω–¥–∏",
        currency: "EUR",
        requirements: {
            cbcr: {
                title: "–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è CbCR",
                who: "–ù—ñ–¥–µ—Ä–ª–∞–Ω–¥—Å—å–∫—ñ –∫–æ–º–ø–∞–Ω—ñ—ó –ú–ù–ö (>‚Ç¨750 –º–ª–Ω), —è–∫—â–æ –∑–≤—ñ—Ç –ø–æ–¥–∞—î—Ç—å—Å—è –∑–∞ –∫–æ—Ä–¥–æ–Ω–æ–º.",
                deadline: "–î–æ –∫—ñ–Ω—Ü—è –∑–≤—ñ—Ç–Ω–æ–≥–æ —Ä–æ–∫—É.",
                penalty: "–î–æ ‚Ç¨900,000.",
                law: "Art. 29c-29e CITA"
            },
            tpForm: {
                title: "–°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Ñ–æ—Ä–º–∏ –∑ –¢–¶",
                who: "–í—ñ–¥—Å—É—Ç–Ω—ñ, –∞–∫—Ü–µ–Ω—Ç –Ω–∞ MF/LF.",
                deadline: "–ù/–î",
                penalty: "–ù/–î",
                law: "Art. 8b CITA"
            },
            localFile: {
                title: "Local File / Master File",
                who: "–û–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è –≥—Ä—É–ø ‚â• ‚Ç¨50 –º–ª–Ω.",
                deadline: "–ú–∞—é—Ç—å –±—É—Ç–∏ –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ–¥–∞–Ω–Ω—è CIT.",
                penalty: "–ü–µ—Ä–µ–≤–µ—Ä—Ç–∞–Ω–Ω—è —Ç—è–≥–∞—Ä—è –¥–æ–≤–µ–¥–µ–Ω–Ω—è. –®—Ç—Ä–∞—Ñ–∏ –¥–æ ‚Ç¨5,514.",
                law: "Art. 29g CITA"
            },
            pillar2: {
                title: "–ó–≤—ñ—Ç–Ω—ñ—Å—Ç—å Pillar 2 (GIR)",
                who: "–ù—ñ–¥–µ—Ä–ª–∞–Ω–¥—Å—å–∫—ñ –∫–æ–º–ø–∞–Ω—ñ—ó –ú–ù–ö (>‚Ç¨750 –º–ª–Ω).",
                deadline: "GIR: 15-18 –º—ñ—Å. –î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è: 17-20 –º—ñ—Å.",
                penalty: "GIR: –¥–æ ‚Ç¨900,000. –î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è: –≤—ñ–¥ ‚Ç¨136.",
                law: "MinTax Act 2024"
            },
            cit: {
                title: "–î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è CIT",
                who: "–í—Å—ñ —é—Ä. –æ—Å–æ–±–∏-–ø–ª–∞—Ç–Ω–∏–∫–∏ –ø–æ–¥–∞—Ç–∫—É.",
                deadline: "5 –º—ñ—Å—è—Ü—ñ–≤ –ø—ñ—Å–ª—è –∫—ñ–Ω—Ü—è —Ñ—ñ–Ω. —Ä–æ–∫—É.",
                penalty: "–û–±–æ–≤'—è–∑–∫–æ–≤–µ —Ä–æ–∑–∫—Ä–∏—Ç—Ç—è –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –∑ 2023 —Ä.",
                law: "Art. 8b CITA"
            }
        }
    }
};

document.addEventListener('DOMContentLoaded', () => {
    const countriesContainer = document.getElementById('countries-container');
    const countryFilter = document.getElementById('country-filter');
    const baseCountryFilter = document.getElementById('base-country-filter');
    const comparisonCountryFilterContainer = document.getElementById('comparison-country-filter');
    const reportTypeFilterContainer = document.getElementById('report-type-filter');
    const detailsTitle = document.getElementById('details-title');
    const comparisonModeToggle = document.getElementById('comparison-mode-toggle');
    
    const standardFiltersView = document.getElementById('standard-filters');
    const comparisonFiltersView = document.getElementById('comparison-filters');
    const countryDetailsView = document.getElementById('country-details-view');
    const comparisonTableView = document.getElementById('comparison-table-view');
    const comparisonContainer = document.getElementById('comparison-container');

    const icons = {
        all: 'üåê', cbcr: 'üìÑ', tpForm: 'üìã', localFile: 'üìÅ', pillar2: 'üåç', cit: 'üí∞'
    };
    
    const reportTypes = {
        all: '–í—Å—ñ', cbcr: 'CbCR', tpForm: '–§–æ—Ä–º–∞ –¢–¶', localFile: 'Local File', pillar2: 'Pillar 2', cit: 'CIT',
    };

    const requirementFields = {
        who: '–•—Ç–æ –ø–æ–¥–∞—î', deadline: '–¢–µ—Ä–º—ñ–Ω –ø–æ–¥–∞–Ω–Ω—è', penalty: '–®—Ç—Ä–∞—Ñ–∏', law: '–û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–∞–≤–æ–≤–∞ –±–∞–∑–∞'
    };

    function populateFilters() {
        Object.entries(tpData).forEach(([countryKey, countryData]) => {
            const option = document.createElement('option');
            option.value = countryKey;
            option.textContent = countryData.name;
            countryFilter.appendChild(option.cloneNode(true));
            baseCountryFilter.appendChild(option.cloneNode(true));

            const checkboxDiv = document.createElement('div');
            checkboxDiv.innerHTML = `
                <input type="checkbox" id="compare-${countryKey}" value="${countryKey}" class="hidden comparison-checkbox">
                <label for="compare-${countryKey}" class="cursor-pointer block w-full text-center p-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition-all">${countryData.name}</label>
            `;
            comparisonCountryFilterContainer.appendChild(checkboxDiv);
        });

        Object.entries(reportTypes).forEach(([key, value]) => {
            const button = document.createElement('button');
            button.className = 'filter-btn flex flex-col items-center justify-center p-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all';
            button.dataset.filter = key;
            if (key === 'all') button.classList.add('active');
            button.innerHTML = `<span class="text-2xl mb-1">${icons[key]}</span><span>${value}</span>`;
            reportTypeFilterContainer.appendChild(button);
        });
    }
    
    function generateCountryCards() {
        countriesContainer.innerHTML = '';
        Object.entries(tpData).forEach(([countryKey, countryData]) => {
            const countryCard = document.createElement('div');
            countryCard.className = 'country-card bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden';
            countryCard.dataset.countryKey = countryKey;
            
            let requirementsHtml = '';
            Object.values(countryData.requirements).forEach((reqData, index) => {
                const reqKey = Object.keys(countryData.requirements)[index];
                requirementsHtml += `
                    <div class="requirement-accordion border-t border-gray-200" data-req-key="${reqKey}">
                        <button class="accordion-button w-full text-left p-4 md:p-5 flex justify-between items-center hover:bg-teal-50/50 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-teal-500 open">
                            <span class="flex items-center">
                                <span class="text-xl mr-3">${icons[reqKey]}</span>
                                <span class="font-semibold text-lg text-gray-700">${reqData.title}</span>
                            </span>
                            <span class="arrow text-teal-600"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></span>
                        </button>
                        <div class="accordion-content bg-gray-50/70">
                            <div class="p-5 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-gray-600">
                                ${Object.entries(requirementFields).map(([fieldKey, fieldLabel]) => `<div><strong class="font-semibold text-gray-800 block mb-1">${fieldLabel}:</strong>${reqData[fieldKey]}</div>`).join('')}
                            </div>
                        </div>
                    </div>`;
            });

            countryCard.innerHTML = `<div class="p-5 bg-teal-600 text-white"><h3 class="text-2xl font-bold">${countryData.name}</h3></div><div class="bg-white">${requirementsHtml}</div>`;
            countriesContainer.appendChild(countryCard);
            countryCard.querySelectorAll('.accordion-button').forEach(btn => btn.classList.add('open'));
        });
    }

    function renderComparisonTable() {
        const baseCountryKey = baseCountryFilter.value;
        const compareCountryKeys = Array.from(comparisonCountryFilterContainer.querySelectorAll('input:checked')).map(cb => cb.value);
        const selectedCountries = [baseCountryKey, ...compareCountryKeys].filter((value, index, self) => self.indexOf(value) === index); // Ensure unique countries
        const selectedReportType = document.querySelector('.filter-btn.active').dataset.filter;

        let tableHtml = `<div class="grid gap-px" style="grid-template-columns: 1fr repeat(${selectedCountries.length}, 2fr);">`;
        
        // Header row
        tableHtml += `<div class="bg-gray-200 font-bold p-3 sticky top-0 z-10">–í–∏–º–æ–≥–∞</div>`;
        selectedCountries.forEach(key => {
            tableHtml += `<div class="bg-gray-200 font-bold p-3 sticky top-0 z-10 text-center">${tpData[key].name}</div>`;
        });

        // Data rows
        Object.keys(reportTypes).filter(rt => rt !== 'all').forEach(reqKey => {
            if (selectedReportType !== 'all' && selectedReportType !== reqKey) return;
            
            const reqTitle = tpData[baseCountryKey]?.requirements[reqKey]?.title || reportTypes[reqKey];
            tableHtml += `<div class="bg-teal-50 font-bold p-2 col-span-${selectedCountries.length + 1}">${reqTitle}</div>`;
            
            Object.entries(requirementFields).forEach(([fieldKey, fieldLabel]) => {
                 tableHtml += `<div class="bg-gray-50 font-semibold p-2">${fieldLabel}</div>`;
                 selectedCountries.forEach(countryKey => {
                    const value = tpData[countryKey]?.requirements[reqKey]?.[fieldKey] || '–ù/–î';
                    tableHtml += `<div class="bg-white p-2 text-sm">${value}</div>`;
                 });
            });
        });

        tableHtml += '</div>';
        comparisonContainer.innerHTML = tableHtml;
    }

    function applyFilters() {
        const isComparisonMode = comparisonModeToggle.checked;

        standardFiltersView.classList.toggle('hidden', isComparisonMode);
        comparisonFiltersView.classList.toggle('hidden', !isComparisonMode);
        countryDetailsView.classList.toggle('hidden', isComparisonMode);
        comparisonTableView.classList.toggle('hidden', !isComparisonMode);

        if (isComparisonMode) {
            renderComparisonTable();
        } else {
            const selectedCountryKey = countryFilter.value;
            const selectedReportType = document.querySelector('.filter-btn.active').dataset.filter;

            document.querySelectorAll('.country-card').forEach(card => {
                const cardCountryKey = card.dataset.countryKey;
                const isVisible = selectedCountryKey === 'all' || cardCountryKey === cardCountryKey;
                card.style.display = isVisible ? 'block' : 'none';

                if (isVisible) {
                    card.querySelectorAll('.requirement-accordion').forEach(accordion => {
                        const reqKey = accordion.dataset.reqKey;
                        const accordionVisible = selectedReportType === 'all' || selectedReportType === reqKey;
                        accordion.style.display = accordionVisible ? 'block' : 'none';
                    });
                }
            });
            detailsTitle.textContent = selectedCountryKey !== 'all' ? `–î–µ—Ç–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥ –ø–æ –∫—Ä–∞—ó–Ω—ñ: ${tpData[selectedCountryKey].name}` : '–î–µ—Ç–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥ –ø–æ –∫—Ä–∞—ó–Ω–∞—Ö';
        }
    }

    function setupEventListeners() {
        countriesContainer.addEventListener('click', e => {
            const button = e.target.closest('.accordion-button');
            if (button) button.classList.toggle('open');
        });

        reportTypeFilterContainer.addEventListener('click', e => {
             const button = e.target.closest('.filter-btn');
             if (button) {
                reportTypeFilterContainer.querySelector('.active').classList.remove('active');
                button.classList.add('active');
                applyFilters();
             }
        });
        
        comparisonModeToggle.addEventListener('change', applyFilters);
        countryFilter.addEventListener('change', applyFilters);
        baseCountryFilter.addEventListener('change', renderComparisonTable);
        comparisonCountryFilterContainer.addEventListener('change', renderComparisonTable);
    }

    // Initialisation
    populateFilters();
    generateCountryCards();
    applyFilters();
    setupEventListeners();
});
</script>

</body>
</html>
